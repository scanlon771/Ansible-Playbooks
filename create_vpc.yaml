---
- hostsL localhost
  gather_facts: no
  tasks:
    - name: Create VPC
      ec2_vpc_net:
        name: Module 5
        cidr_block: 10.10.0.0/16
        tags:
          Module: 5
        profile: auburn
        region: "us-west-2"
        state: present
      register: vpc
    - name: debug
      debug: var=vpc
    - name: Create public subnet
      ec2_vpc_subnet:
        vpc_id: "{{ vpc.vpc.id }}"
        tags:
          Name: Module5 public
          Module: 5
        cidr: 10.10.0.0/24
	profile: auburn
        region: "us-west-2"
        state: present
    - name: Create private subnet
      ec2_vpc_subnet:
        vpc_id: "{{ vpc.vpc.id }}"
        tags:
          Name: Module5 private
          Module: 5
        cidr: 10.10.1.0/24
        profile: auburn
        region: "us-west-2"
        state: present
